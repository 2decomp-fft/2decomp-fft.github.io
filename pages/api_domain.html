
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>2D Pencil Decomposition API &#8212; 2decomp_doc  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API for Three-dimensional FFTs" href="api_fft.html" />
    <link rel="prev" title="API" href="api.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="d-pencil-decomposition-api">
<h1>2D Pencil Decomposition API<a class="headerlink" href="#d-pencil-decomposition-api" title="Permalink to this headline">Â¶</a></h1>
<p>This page explains the key public interfaces of the 2D decomposition library. After reading this section, users should be able to easily build applications using this domain decomposition strategy. The library interface is designed to be very simple. One can refer to the sample applications for a quick start.</p>
<p>The 2D Pencil Decomposition API is defined in one Fortran module which should be used by applications:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">decomp_2d</span></code></p>
</div></blockquote>
<p><strong>Global Variables</strong></p>
<p>Following is the list of global variables defined by the library that can be used in applications. Obviously these names should not be redefined in applications to avoid conflict. Also note that some variables contain duplicate or redundant information just to simplify the programming.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mytype</span></code> - Use this variable to define the KIND of floating-point data, e.g. real(mytype) :: var or complex(mytype) :: cvar. This makes it easy to switch between single precision and double precision (more details).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">real_type,</span> <span class="pre">complex_type</span></code> - These are the proper MPI datatypes to be used (for real and complex numbers, respectively) if applications need to call MPI library routines directly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nx_global,</span> <span class="pre">ny_global,</span> <span class="pre">nz_global</span></code> - size of the global data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nproc</span></code> - the total number of MPI processes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nrank</span></code> - the rank of the current MPI process.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xsize(i),</span> <span class="pre">ysize(i),</span> <span class="pre">zsize(i),</span> <span class="pre">i=1,2,3</span></code> - sizes of the sub-domains held by the current process. The first letter refers to the pencil orientation and the three 1D array elements contain the sub-domain sizes in X, Y and Z directions, respectively. In a 2D pencil decomposition, there is always one dimension which completely resides in local memory. So by definition xsize(1)==nx_global, ysize(2)==ny_global and zsize(3)==nz_global.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xstart(i),</span> <span class="pre">ystart(i),</span> <span class="pre">zstart(i),</span> <span class="pre">xend(i),</span> <span class="pre">yend(i),</span> <span class="pre">zend(i),</span> <span class="pre">i=1,2,3</span></code> - the starting and ending indices for each sub-domain, as in the global coordinate system. Obviously, it can be seen that xsize(i)=xend(i)-xstart(i)+1. It may be convenient for certain applications to use global coordinate (for example when extracting a 2D plane from a 3D domain, it is easier to know which process owns the plane if global index is used).</p></li>
</ul>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">2decomp_doc</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="domaindecomposition.html">Domain Decomposition Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="fft.html">Fast Fourier Transforms</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">2D Pencil Decomposition API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_fft.html">API for Three-dimensional FFTs</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_halo.html">Halo-cell Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_io.html">Parallel I/O</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="api.html">API</a><ul>
      <li>Previous: <a href="api.html" title="previous chapter">API</a></li>
      <li>Next: <a href="api_fft.html" title="next chapter">API for Three-dimensional FFTs</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Sylvain.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/pages/api_domain.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>