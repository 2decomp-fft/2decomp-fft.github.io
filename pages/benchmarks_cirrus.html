
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Results for GPU: Cirrus &#8212; 2decomp_doc  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Publications" href="publications.html" />
    <link rel="prev" title="Results for CPU: Archer2" href="benchmarks_archer2.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="results-for-gpu-cirrus">
<h1>Results for GPU: Cirrus<a class="headerlink" href="#results-for-gpu-cirrus" title="Permalink to this headline">¶</a></h1>
<p>Cirrus is a national UK service provided by EPCC. The GPU partition of the cluster is
composed by 2xIntel Xeon “Cascade Lake”, 2.4 Ghz, 20-core per node together with
4xNvidia Tesla V100-SXM2-16GB GPU, 640 Tensor core, 5,120 CUDA core per node.
The number of nodes available for the GPU partition is 36 for a total of 150 GPUs.</p>
<p>Resuls are listed below</p>
<ul class="simple">
<li><p>Transpose real 3D array</p>
<ul>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=512</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_TrReal_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability transpose real test: Resolution 512^3" src="../_images/2023_08_01_Res0512x0512x0512_TrReal_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_TrReal_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp transpose real test: Resolution 512^3" src="../_images/2023_08_01_Res0512x0512x0512_TrReal_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a></p></li>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=1024</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_TrReal_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability transpose real test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_TrReal_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_TrReal_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp transpose real test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_TrReal_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a></p></li>
</ul>
</li>
<li><p>Transpose complex 3D array</p>
<ul>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=512</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_TrClx_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability transpose complex test: Resolution 512^3" src="../_images/2023_08_01_Res0512x0512x0512_TrClx_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_TrClx_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp transpose complex test: Resolution 512^3" src="../_images/2023_08_01_Res0512x0512x0512_TrClx_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_TrClx_GPU_Cirrus_SpeedUpGPUoverCPU.pdf"><img alt="Cirrus SpeedUp GPU/CPU transpose complex test: Resolution 512^3" src="../_images/2023_08_01_Res0512x0512x0512_TrClx_GPU_Cirrus_SpeedUpGPUoverCPU.pdf" style="width: 32%;" /></a></p></li>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=1024</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_TrClx_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability transpose complex test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_TrClx_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_TrClx_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp transpose complex test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_TrClx_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_TrClx_GPU_Cirrus_SpeedUpGPUoverCPU.pdf"><img alt="Cirrus SpeedUp GPU/CPU transpose complex test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_TrClx_GPU_Cirrus_SpeedUpGPUoverCPU.pdf" style="width: 32%;" /></a></p></li>
</ul>
</li>
<li><p>FFT transform of a 3D real array starting from <code class="docutils literal notranslate"><span class="pre">X</span></code> physical direction</p>
<ul>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=512</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_R2CX_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability R2CX test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_R2CX_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_R2CX_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp R2CX test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_R2CX_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_R2CX_GPU_Cirrus_SpeedUpGPUoverCPU.pdf"><img alt="Cirrus SpeedUp GPU/CPU R2CX test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_R2CX_GPU_Cirrus_SpeedUpGPUoverCPU.pdf" style="width: 32%;" /></a></p></li>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=1024</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_R2CX_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability R2CX test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_R2CX_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_R2CX_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp R2CX test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_R2CX_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_R2CX_GPU_Cirrus_SpeedUpGPUoverCPU.pdf"><img alt="Cirrus SpeedUp GPU/CPU R2CX test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_R2CX_GPU_Cirrus_SpeedUpGPUoverCPU.pdf" style="width: 32%;" /></a></p></li>
</ul>
</li>
<li><p>FFT transform of a 3D complex array starting from <code class="docutils literal notranslate"><span class="pre">X</span></code> physical direction</p>
<ul>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=512</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_C2CX_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability R2CX test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_C2CX_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_C2CX_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp R2CX test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_C2CX_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_C2CX_GPU_Cirrus_SpeedUpGPUoverCPU.pdf"><img alt="Cirrus SpeedUp GPU/CPU R2CX test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_C2CX_GPU_Cirrus_SpeedUpGPUoverCPU.pdf" style="width: 32%;" /></a></p></li>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=1024</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_C2CX_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability R2CX test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_C2CX_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_C2CX_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp R2CX test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_C2CX_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_C2CX_GPU_Cirrus_SpeedUpGPUoverCPU.pdf"><img alt="Cirrus SpeedUp GPU/CPU R2CX test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_C2CX_GPU_Cirrus_SpeedUpGPUoverCPU.pdf" style="width: 32%;" /></a></p></li>
</ul>
</li>
<li><p>FFT transform of a 3D real array starting from <code class="docutils literal notranslate"><span class="pre">Z</span></code> physical direction</p>
<ul>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=512</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_R2CZ_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability R2CZ test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_R2CZ_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_R2CZ_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp R2CZ test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_R2CZ_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_R2CZ_GPU_Cirrus_SpeedUpGPUoverCPU.pdf"><img alt="Cirrus SpeedUp GPU/CPU R2CZ test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_R2CZ_GPU_Cirrus_SpeedUpGPUoverCPU.pdf" style="width: 32%;" /></a></p></li>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=1024</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_R2CZ_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability R2CZ test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_R2CZ_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_R2CZ_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp R2CZ test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_R2CZ_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_R2CZ_GPU_Cirrus_SpeedUpGPUoverCPU.pdf"><img alt="Cirrus SpeedUp GPU/CPU R2CZ test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_R2CZ_GPU_Cirrus_SpeedUpGPUoverCPU.pdf" style="width: 32%;" /></a></p></li>
</ul>
</li>
<li><p>FFT transform of a 3D complex array starting from <code class="docutils literal notranslate"><span class="pre">Z</span></code> physical direction</p>
<ul>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=512</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_C2CZ_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability R2CZ test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_C2CZ_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_C2CZ_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp R2CZ test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_C2CZ_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res0512x0512x0512_C2CZ_GPU_Cirrus_SpeedUpGPUoverCPU.pdf"><img alt="Cirrus SpeedUp GPU/CPU R2CZ test: Resolution 0512^3" src="../_images/2023_08_01_Res0512x0512x0512_C2CZ_GPU_Cirrus_SpeedUpGPUoverCPU.pdf" style="width: 32%;" /></a></p></li>
<li><p>Resolution <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=1024</span></code> <br/> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_C2CZ_GPU_Cirrus_ScalabilityTsec.pdf"><img alt="Cirrus Scalability R2CZ test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_C2CZ_GPU_Cirrus_ScalabilityTsec.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_C2CZ_GPU_Cirrus_SpeedUp.pdf"><img alt="Cirrus SpeedUp R2CZ test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_C2CZ_GPU_Cirrus_SpeedUp.pdf" style="width: 32%;" /></a> <a class="reference internal" href="../_images/2023_08_01_Res1024x1024x1024_C2CZ_GPU_Cirrus_SpeedUpGPUoverCPU.pdf"><img alt="Cirrus SpeedUp GPU/CPU R2CZ test: Resolution 1024^3" src="../_images/2023_08_01_Res1024x1024x1024_C2CZ_GPU_Cirrus_SpeedUpGPUoverCPU.pdf" style="width: 32%;" /></a></p></li>
</ul>
</li>
</ul>
<div class="section" id="discussion-on-cirrus-results">
<h2>Discussion on Cirrus results<a class="headerlink" href="#discussion-on-cirrus-results" title="Permalink to this headline">¶</a></h2>
<p>This page present the first scalability tests of the GPU version of the version 2.0 of 2DECOMP&amp;FFT library.
All results have been obtained using the NVHPC compiler version 22.11 together with openMPI 4.1.4.
The results for the GPU compilation tests both CUDA aware MPI and NVIDIA Colletive Communication Library (NCCL).
The smallest resolution case <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=512</span></code> can also fit into a single GPU therefore results are reported
also for a 1/4 (1 GPU) and for 1/2 (2 GPUs) of a node. Results with the pure MPI version instead use always
at least a full node with the full 40 cores available.
Speedup GPU/CPU is computed using as reference time for the CPU the case with 1 full node for the <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=512</span></code>
resolution and 2 full nodes for <code class="docutils literal notranslate"><span class="pre">NX=NY=NZ=1024</span></code> since the largest case needs at least 8 GPUs to fit in memory.</p>
<p>The CPU results, particularly the ones for the real and complex transposes, show an acceptable scalability but
they are not comparable with the one presented for <a class="reference internal" href="benchmarks_archer2.html"><span class="doc">Archer2</span></a> particularly for the coarses
mesh resolution. This could be mainly attributed to the network which is considerebly slower that the one available
on Archer2.</p>
<p>Communication greatly improves when using GPUs with both CUDA aware MPI and particularly with NCCL.
For the GPU cases the slabs decomposition tends also to give better and more consistent performances with
NCCL generally 50% or above faster than the CUDA aware MPI.
For the low resolution case it is very noticeable a drop in performances when moving above
1 node, that can be attributed to the already mentioned to the relatively slow interconnect.
For the larger case, where at least 2 nodes are necessary to fir the case in the GPUs memory the interconnect
issue is less visible.
The speedup between between GPU acceleration and CPU is from a factor of 5 or above dependinng on the
case and the resolution.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">2decomp_doc</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="domaindecomposition.html">Domain Decomposition Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="fft.html">Fast Fourier Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="benchmarks.html">Benchmarks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="benchmarks_archer2.html">Results for CPU: Archer2</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Results for GPU: Cirrus</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="benchmarks.html">Benchmarks</a><ul>
      <li>Previous: <a href="benchmarks_archer2.html" title="previous chapter">Results for CPU: Archer2</a></li>
      <li>Next: <a href="publications.html" title="next chapter">Publications</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Sylvain.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/pages/benchmarks_cirrus.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>